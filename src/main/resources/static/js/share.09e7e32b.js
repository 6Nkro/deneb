"use strict";(self["webpackChunkdeneb"]=self["webpackChunkdeneb"]||[]).push([[557],{8387:function(t,e,o){o.r(e),o.d(e,{default:function(){return it}});var s=o(3396);const a={id:"community"},l={class:"container"};function n(t,e,o,n,i,c){const r=(0,s.up)("share-contents"),u=(0,s.up)("share-post-detail");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[i.showContents?((0,s.wg)(),(0,s.j4)(r,{key:0,postList:i.postList,page:i.page,pageSize:i.pageSize,onMovePage:c.movePage,onOpenDetail:c.openDetail},null,8,["postList","page","pageSize","onMovePage","onOpenDetail"])):(0,s.kq)("",!0),i.post_detail?((0,s.wg)(),(0,s.j4)(u,{key:1,post:i.post,onShareCount:c.shareCount,onLikeCount:c.likeCount,onClose:e[0]||(e[0]=t=>i.post_detail=!1)},null,8,["post","onShareCount","onLikeCount"])):(0,s.kq)("",!0)])])}var i=o(9242),c=o(7139);const r=t=>((0,s.dD)("data-v-519c0a12"),t=t(),(0,s.Cn)(),t),u={class:"search"},d=r((()=>(0,s._)("span",null,"22",-1)));function p(t,e,o,a,l,n){const r=(0,s.up)("v-select"),p=(0,s.up)("v-text-field"),m=(0,s.up)("v-card-title"),h=(0,s.up)("v-card-text"),k=(0,s.up)("v-chip"),_=(0,s.up)("v-slide-group-item"),w=(0,s.up)("v-slide-group"),g=(0,s.up)("v-list-item-title"),v=(0,s.up)("v-list-item-subtitle"),b=(0,s.up)("v-col"),f=(0,s.up)("v-icon"),y=(0,s.up)("v-row"),x=(0,s.up)("v-card"),L=(0,s.up)("v-pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",u,[(0,s.Wm)(r,{variant:"filled",class:"d-inline-block",modelValue:l.searchType,"onUpdate:modelValue":e[0]||(e[0]=t=>l.searchType=t),items:["내용","태그","작성자"],"hide-details":"","single-line":""},null,8,["modelValue"]),(0,s.Wm)(p,{variant:"filled",class:"d-inline-block",style:{width:"24rem"},placeholder:"검색어 입력",type:"text",modelValue:l.search,"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),"append-inner-icon":"mdi-magnify","hide-details":"","onClick:appendInner":n.log,onKeydown:(0,i.D2)(n.log,["enter"]),"max-length":"100"},null,8,["modelValue","onClick:appendInner","onKeydown"])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.postList,(t=>((0,s.wg)(),(0,s.j4)(x,{class:"post mx-auto px-3 py-3 elevation-3",width:"720",onClick:e=>n.openDetail(t),key:t.bookcase_seq},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"text-truncate"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(t.bookcase_name),1)])),_:2},1024),(0,s.Wm)(h,{class:"text-truncate py-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(t.share_contents),1)])),_:2},1024),(0,s.Wm)(w,{class:"py-3","show-arrows":""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(JSON.parse(t.share_tag),(t=>((0,s.wg)(),(0,s.j4)(_,{key:t},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"mx-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(t),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{cols:"6",class:"text-start px-5 text-truncate"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(t.user_name),1)])),_:2},1024),(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(n.getPostDateFormat(t.share_date))+" 저장",1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(b,{cols:"6",class:"justify-end px-5 d-flex align-center text-truncate"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"ml-3 mr-1",icon:"mdi-heart",size:"x-small",color:"red"}),(0,s._)("span",null,(0,c.zw)(t.like_count),1),(0,s.Wm)(f,{class:"ml-3 mr-1",icon:"mdi-share-variant",size:"x-small"}),(0,s._)("span",null,(0,c.zw)(t.share_count),1),(0,s.Wm)(f,{class:"ml-3 mr-1",icon:"mdi-message-reply-text",size:"x-small"}),d])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),(0,s.Wm)(L,{class:"pagination my-5",modelValue:l.currentPage,"onUpdate:modelValue":e[2]||(e[2]=t=>l.currentPage=t),length:o.pageSize,"total-visible":8,rounded:"circle"},null,8,["modelValue","length"])],64)}o(7658);var m={props:{postList:Object,page:Number,pageSize:Number},components:{},data(){return{searchType:"내용",search:"",currentPage:this.page}},setup(){},created(){},mounted(){},unmounted(){},watch:{currentPage:function(){this.$router.push({name:"shareList",params:{page:this.currentPage}}),this.$emit("movePage",this.currentPage)}},methods:{log(){console.log(this.search)},getPostDateFormat(t){const e=new Date,o=new Date(new Date(t).getTime()+324e5),s=e.getTime()-o.getTime();return s>864e5?this.$getDateFormat(o).slice(0,10):this.$getDateFormat(o).slice(11,16)},openDetail(t){const e=event.target.className;if(e.includes("chip")||e.includes("chevron"))return!1;this.$emit("openDetail",t)}}},h=o(89);const k=(0,h.Z)(m,[["render",p],["__scopeId","data-v-519c0a12"]]);var _=k;const w=t=>((0,s.dD)("data-v-2dc1a2fc"),t=t(),(0,s.Cn)(),t),g={class:"close-wrap"},v={class:"modal__title"},b={class:"title d-flex align-center elevation-3"},f={class:"modal__content"},y={class:"contents elevation-3"},x={class:"contents-text text-start"},L={class:"button-group"},W={class:"mt-1"},C={class:"mt-1"},z={class:"d-inline-flex justify-center w-100 my-5"},D={class:"justify-center"},$=w((()=>(0,s._)("hr",{class:"my-3"},null,-1))),P=w((()=>(0,s._)("span",{class:"reply-name"},null,-1))),S=w((()=>(0,s._)("span",{class:"reply-contents"},null,-1))),U=w((()=>(0,s._)("span",{class:"reply-date"},"ㅇㅇ",-1))),q=w((()=>(0,s._)("hr",null,null,-1))),V=w((()=>(0,s._)("hr",null,null,-1)));function j(t,e,o,a,l,n){const r=(0,s.up)("v-icon"),u=(0,s.up)("v-btn"),d=(0,s.up)("share-book-list"),p=(0,s.up)("v-card"),m=(0,s.up)("v-expand-transition"),h=(0,s.up)("v-textarea"),k=(0,s.up)("v-col"),_=(0,s.up)("v-row"),w=(0,s.up)("vue-final-modal");return(0,s.wg)(),(0,s.j4)(w,{modelValue:l.showModal,"onUpdate:modelValue":e[3]||(e[3]=t=>l.showModal=t),classes:"modal-container","content-class":"modal-content elevation-3","lock-scroll":!0,"click-to-close":!0,"esc-to-close":!0,onClosed:n.close},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.Wm)(r,{icon:"mdi-close",class:"modal__close",color:"#808080",onClick:e[0]||(e[0]=t=>l.showModal=!1)})]),(0,s._)("span",v,[(0,s._)("div",b,[(0,s.Uk)((0,c.zw)(o.post.bookcase_name)+" ",1),(0,s.Wm)(u,{class:"contents-fold ml-auto",variant:"plain",icon:l.showContents?"mdi-chevron-up":"mdi-chevron-down",onClick:e[1]||(e[1]=t=>l.showContents=!l.showContents)},null,8,["icon"])])]),(0,s._)("div",f,[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("div",y,[(0,s.Wm)(d,{bookList:l.bookList},null,8,["bookList"]),(0,s._)("div",x,(0,c.zw)(o.post.share_contents),1),(0,s._)("div",L,[(0,s.Wm)(p,{class:"button-square d-inline-block mx-3",onClick:n.likePost},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(r,{class:"py-1",icon:l.like_already?"mdi-heart-off":"mdi-heart",color:"red",style:{"font-size":"2rem"}},null,8,["icon"]),(0,s._)("div",W,(0,c.zw)(o.post.like_count),1)])])),_:1},8,["onClick"]),(0,s.Wm)(p,{class:"button-square d-inline-block mx-3",onClick:n.sharePost},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(r,{icon:"mdi-share-variant",color:"black",style:{"font-size":"2rem"}}),(0,s._)("div",C,(0,c.zw)(o.post.share_count),1)])])),_:1},8,["onClick"])])],512),[[i.F8,l.showContents]])])),_:1}),(0,s._)("div",z,[(0,s.Wm)(h,{variant:"outlined",label:"댓글",modelValue:l.reply_contents,"onUpdate:modelValue":e[2]||(e[2]=t=>l.reply_contents=t),"no-resize":"",rows:"3",counter:"",maxlength:"200"},null,8,["modelValue"]),(0,s.Wm)(u,{variant:"outlined",size:"large",color:"grey",style:{"border-radius":"0",height:"104px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{icon:"mdi-send",color:"blue"})])),_:1})]),(0,s._)("div",D,[$,(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,{cols:"2",class:"text-start"},{default:(0,s.w5)((()=>[P])),_:1}),(0,s.Wm)(k,{cols:"8",class:"text-start"},{default:(0,s.w5)((()=>[S])),_:1}),(0,s.Wm)(k,{cols:"2",class:"text-end"},{default:(0,s.w5)((()=>[U,(0,s.Wm)(r,{icon:"mdi-close",size:"x-small",color:"red-lighten-3"})])),_:1}),(0,s.Wm)(k,{cols:"12"},{default:(0,s.w5)((()=>[q])),_:1}),(0,s.Wm)(k,{cols:"2",class:"text-start"},{default:(0,s.w5)((()=>[(0,s.Uk)(" ㅇㅇ ")])),_:1}),(0,s.Wm)(k,{cols:"8",class:"text-start"},{default:(0,s.w5)((()=>[(0,s.Uk)(" dd ")])),_:1}),(0,s.Wm)(k,{cols:"2",class:"text-end"},{default:(0,s.w5)((()=>[(0,s.Uk)(" ㅇㅇ ")])),_:1}),(0,s.Wm)(k,{cols:"12"},{default:(0,s.w5)((()=>[V])),_:1})])),_:1})])])])),_:1},8,["modelValue","onClosed"])}var B=o(2848);const M={class:"book-group"},I={class:"book-title d-flex align-center handle elevation-3"},T={class:"px-3"},F={class:"book-content elevation-3"},O={key:1};function K(t,e,o,a,l,n){const i=(0,s.up)("v-icon"),r=(0,s.up)("share-bookmark-list"),u=(0,s.up)("YouTube");return(0,s.wg)(),(0,s.iD)("div",M,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.bookList,(t=>((0,s.wg)(),(0,s.iD)("div",{class:(0,c.C_)("Bookmark"===t.book.book_type?"book":"video-book"),key:t.book.book_seq},[(0,s._)("div",I,[(0,s.Wm)(i,{icon:t.book.book_icon,color:t.book.book_icon_color,size:"small"},null,8,["icon","color"]),(0,s._)("div",T,(0,c.zw)(t.book.book_name),1)]),(0,s._)("div",{class:"elevation-1",style:(0,c.j5)([{height:"0.8rem"},{background:`linear-gradient( to right,\n          ${t.book.book_color} 90%,\n          ${t.book.book_color+"64"}`}])},null,4),(0,s._)("div",F,["Bookmark"===t.book.book_type?((0,s.wg)(),(0,s.j4)(r,{key:0,bookmarkList:t.bookmarkList},null,8,["bookmarkList"])):(0,s.kq)("",!0),"Video"===t.book.book_type?((0,s.wg)(),(0,s.iD)("div",O,[(0,s.Wm)(u,{src:"https://www.youtube.com/watch?v="+t.book.video_id,vars:{start:0}},null,8,["src"])])):(0,s.kq)("",!0)])],2)))),128))])}const N=t=>((0,s.dD)("data-v-ef30e886"),t=t(),(0,s.Cn)(),t),Y={class:"bookmark-group"},H=["src"],Z=["href"],R=N((()=>(0,s._)("br",null,null,-1))),E=N((()=>(0,s._)("br",null,null,-1)));function J(t,e,o,a,l,n){const i=(0,s.up)("v-tooltip");return(0,s.wg)(),(0,s.iD)("div",Y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.bookmarkList,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.bookmark_seq,class:"bookmark d-flex align-center py-1"},[(0,s._)("img",{src:"https://www.google.com/s2/favicons?domain="+t.bookmark_url,alt:"favicon"},null,8,H),(0,s._)("a",{class:"px-1",href:n.getUrlFormat(t.bookmark_url),target:"_blank"},[(0,s.Uk)((0,c.zw)(t.bookmark_name)+" ",1),(0,s.Wm)(i,{activator:"parent",location:"top","max-width":"360"},{default:(0,s.w5)((()=>[(0,s.Uk)(" URL : "+(0,c.zw)(t.bookmark_url)+" ",1),R,E,(0,s.Uk)(" MEMO : "+(0,c.zw)(t.bookmark_memo),1)])),_:2},1024)],8,Z)])))),128))])}var A={props:{bookmarkList:Object},components:{},data(){return{}},setup(){},created(){},mounted(){},unmounted(){},methods:{getUrlFormat(t){const e=t.startsWith("http://")||t.startsWith("https://");return e?t:"http://"+t}}};const G=(0,h.Z)(A,[["render",J],["__scopeId","data-v-ef30e886"]]);var Q=G,X={props:{bookList:Object},components:{ShareBookmarkList:Q},data(){return{}},setup(){},created(){},mounted(){},unmounted(){},methods:{}};const tt=(0,h.Z)(X,[["render",K],["__scopeId","data-v-3a6e2010"]]);var et=tt,ot={props:{post:Object},components:{VueFinalModal:B.iR,ShareBookList:et},data(){return{showModal:!1,showContents:!0,reply_contents:"",bookList:null,like_already:null}},setup(){},created(){this.getBookList(this.post.bookcase_seq)},mounted(){},unmounted(){},methods:{close(){this.showModal=!0,this.$emit("close","createBook")},async getBookList(t){const e="/share/detail",o={user_email:this.$store.state.accountStore.account.user_email,user_pw:this.$store.state.accountStore.account.user_pw,bookcase_seq:t},s=await this.$axios.get(e,{params:o});if(!s.data)return!1;this.bookList=s.data.bookList,this.like_already=s.data.like_already,this.showModal=!0},async likePost(){const t="/share/like",e={user_email:this.$store.state.accountStore.account.user_email,user_pw:this.$store.state.accountStore.account.user_pw,bookcase_seq:this.post.bookcase_seq,like_already:this.like_already},o=await this.$axios.post(t,null,{params:e});this.$emit("likeCount",{post:this.post,increase:this.like_already?-1:1}),this.$store.commit("addBookcase",{bookcase:o.data}),this.like_already=!this.like_already},async sharePost(){const t={html:"<strong>'"+this.post.bookcase_name+"'</strong><br>페이지를 라이브러리에 추가합니다.",icon:"info",showCancelButton:!0,confirmButtonText:"예",cancelButtonText:"아니오"};this.$swal.fire(t).then((async t=>{if(t.isConfirmed){const t="/share/import",e={user_email:this.$store.state.accountStore.account.user_email,user_pw:this.$store.state.accountStore.account.user_pw,share_code:this.post.share_code},o=await this.$axios.post(t,null,{params:e});this.$emit("shareCount",{post:this.post,increase:0===o.data.share_count?1:0}),this.$store.commit("addBookcase",{bookcase:o.data});const s={icon:"success",html:'<a href="/library">라이브러리</a>에 성공적으로 저장되었어요.'};this.$swal.fire(s)}}))}}};const st=(0,h.Z)(ot,[["render",j],["__scopeId","data-v-2dc1a2fc"]]);var at=st,lt={components:{ShareContents:_,SharePostDetail:at},data(){return{showContents:!1,postList:null,post:null,pageSize:null,post_detail:!1,page:Number(this.$route.params.page)}},setup(){},created(){this.getPostList(this.$route.params.page)},mounted(){},unmounted(){},methods:{async getPostList(t){const e="/share/list",o={page:t},s=await this.$axios.get(e,{params:o});this.pageSize=Math.floor(s.data.count/10)+1,this.postList=s.data.postList,this.showContents=!0,console.log(s.data.postList)},movePage(t){this.getPostList(t),this.page=Number(this.$route.params.page)},openDetail(t){this.post=t,this.post_detail=!0},shareCount(t){const e=this.postList.findIndex((e=>e.bookcase_seq===t.post.bookcase_seq));this.postList[e].share_count=this.postList[e].share_count+t.increase,this.postList.splice(0,0)},likeCount(t){const e=this.postList.findIndex((e=>e.bookcase_seq===t.post.bookcase_seq));this.postList[e].like_count=this.postList[e].like_count+t.increase,this.postList.splice(0,0)}}};const nt=(0,h.Z)(lt,[["render",n],["__scopeId","data-v-6310556f"]]);var it=nt}}]);
//# sourceMappingURL=share.09e7e32b.js.map